# 列表视图 ListView

---

### 设计属性

* ##### 对象名称

  * 类型：字符串；

  * 值：

  * 说明：自定义控件对象名；
* ##### 数据模板

  * 类型：编辑模板（按钮）；

  * 值：

  * 说明：在列表视图中弹出编辑模板界面；
* ##### 设置分组

  * 类型：编辑分组（按钮）；

  * 值：

  * 说明：在列表视图中弹出编辑分组界面；
* ##### 对象分类

  * 类型：编辑对象分类（按钮）；

  * 说明：在列表视图中弹出编辑对象分类界面；
* ##### 分类属性

  * 类型：字符串；

  * 说明：用作对象分类的字段名；
* ##### 正常模板

  * 类型：字符串；

  * 值：默认：ItemTemplate；

  * 说明：设置默认显示模板的模板名；
* ##### 选定模板

  * 类型：字符串；

  * 值：默认：ItemSelectedTemplate

  * 说明：设置选定时显示模板的模板名；
* ##### 项目成员

  * 类型：字符串；

  * 说明：列表控件从表单数据上下文中获取值的字段名；
* ##### 默认选中行

  * 类型：数值；

  * 说明：设置默认选中的Item索引值，从0开始,填写超出范围、类型错误、不填写则不会默认选中；
* ##### 选定前景颜色

  * 类型：（颜色选择器）；

  * 说明：选定时文字颜色；如果在编辑模板时设置了前景色，此处设置将无效；
* ##### 选定背景颜色

  * 类型：（颜色选择器）；

  * 说明：选定时模板背景颜色；如果在编辑模板时设置了背景色，此处设置将无效；
* ##### 选定边框颜色

  * 类型：（颜色选择器）；

  * 说明：选定时模板边框颜色；如果在编辑模板时设置了边框颜色，此处设置将无效；
* ##### 纵向排列项目-FillFullRow；
* ##### 横向单行排列项目-SingleRow；

##### 注:每个模板本身就是一个表单Form；模板对象的属性ListView，指向当前列表视图本身。

#### 

#### 编辑模板-设计属性

* ##### 保存关闭

  * 作用：保存所有编辑的模板，并关闭模板编辑器；
* ##### 添加模板

  * 作用：添加一个新的模板；
* ##### 删除模板

  * 作用：删除选中的模板；

#### 编辑分组-列表分组设计

```
    作用：当数据需要分组显示时，需要进行分组设置
```

* ##### 保存并关闭

  * 作用：保存所有编辑的分组，并关闭分组设计器；
* ##### 新建分组

  * 作用：添加一个新的分组设计器；
* ##### 删除分组

  * 作用：删除选中的分组设计器；
* ##### 分组成员

  * 作用：设置数据源中分组项目的数据属性；
* ##### 分组模板

  * 作用：组模板名；
* ##### 自动展开分组

  * 作用：是否自动展开分组；
* ##### 逐层加载方法

  * 作用：
* ##### 项目模板

  * 作用：每组中项目的模板；
* ##### 选定模板

  * 作用：每组中项目的选定模板；
* ##### 横向排列

  * 作用：项目是否横向排列，勾选的话项目就会以行内块显示；
* ##### 分页加载

  * 作用：设置是否分页加载；
* ##### 每页对象数

  * 作用：分页加载的话，每页显示对象数；

#### 编辑对象分类-设计属性

* ##### 保存并关闭

  * 说明：保存所有编辑的对象分类，并关闭对象分类编辑器；
* ##### 添加对象分类

  * 说明：添加一个新的对象分类；
* ##### 删除对象分类

  * 说明：删除选中的对象分类；
* ##### 分类值

  * 说明：分类属性的值，分类属性在列表设计器里设置
* ##### 项目模板

  * 说明：分类属性为此值时，显示的模板名；
* ##### 选定模板

  * 说明：分类属性为此值时，显示的模板名；
* ##### 正常项目边框颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；
* ##### 前景颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；
* ##### 背景颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；
* ##### 选定项目边框颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；
* ##### 前景颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；
* ##### 背景颜色

  * 说明：如果模板设计时设置了模板此样式颜色，此设置将无效；

### 事件处理程序

* ##### SelectedItemChanged

  * 调用时机：选中行改变时；
  * 说明：cmd.Sender指代当前行对象；
  * 备注：
* ##### ItemTemplateSelector

  * 调用时机：控件加载数据时；
  * 说明：每条数据的呈现都会调用，cmd.Sender指代当前行数据对象。需要在此事件中返回模板名（字符串）。
  * 备注：性能差，谨慎使用！
* ##### ItemClick

  * 调用时机：点击item时；
  * 说明：cmd.Sender指代当前行对象
  * 备注：
* ##### ItemDataContextChanged

  * 调用时机：为Item赋值数据时；
  * 说明：cmd.Sender指代当前行对象
  * 备注：多次调用，性能差；
* ##### SelectedItemDblClick

  * 调用时机：双击Item时；
  * 说明：cmd.Sender指代当前行对象；
  * 备注：

### 属性、方法

* ##### ItemSource-属性，设置数据源；

  * 说明：数组；
* * 示例：
  * ```js
    ListView.ItemSource = [{'Text':'标题1','Value':'副标题'……},……]    ;//ListView为控件对象
    ```
* ##### ItemTemplate-属性，设置正常显示模板；

  * 说明：字符串类型；
* * 示例：
  * ```js
    ListView.ItemTemplate = "ItemTemplate";//ListView为控件对象
    ```
* ##### ItemSelectedTemplate-属性，设置选中时显示模板；

  * 说明：字符串；
* * 示例：
  * ```js
    ListView.ItemSelectedTemplate = "ItemSelectedTemplate";   //ListView为控件对象
    ```
* ##### AddItem\(data,Temp\)-方法，添加一行；

  * 说明：为列表视图添加一行，参数data为对象类型；Temp为字符串类型，可选参数，模板的名字，如不传此参数，添加默认模板；返回值为Item对象；
* * 示例：
  * ```js
    var Item = ListView.AddItem({'Text':'标题1','Value':'副标题……'},'ItemTemplate');    //ListView为控件对象
    ```
* ##### AddItemAt\(position,data,Temp\)-方法，在指定位置添加一行；

  * 说明：为列表视图在指定位置添加一行，参数position为数值类型，需要插入item的位置，从0开始；data为对象类型，插入item的数据上下文对象；Temp为字符串类型，可选参数，模板的名字，如不传此参数，添加默认模板；返回值为Item对象；
* * 示例：
  * ```js
    //ListView为控件对象 在首行添加一行
    var Item = ListView.AddItemAt(0,{'Text':'标题1','Value':'副标题……'},'ItemTemplate');
    ```
* ##### Items-属性，获取所有行对象集合；

  * 说明：数组，保存着每一个模板的表单对象。通过表单对象的属性FormControls获取模板内命名的控件对象集合；
* * 示例：
  * ```js
    var items = ListView.Items;//ListView为框控件对象
    ```
* ##### SelectedItem-属性，获取列表选中行对象；

  * 说明：对象,SelectedItem对象的属性DataContext存储着SelectedItem的数据上下文；
* * 示例：
  * ```js
    var item = ListView. SelectedItem;//ListView为控件对象
    ```
* ##### OnSelectedItemChanged\(item\)-方法，设置某行呈现选中效果；

  * 说明：这个方法只会在样式上改变选中效果，不会触发点击事件；
* * 示例：
  * ```js
    ListView.OnSelectedItemChanged(ListView.Items[0]);   //ListView为文本输入框控件对象
    ```
* ##### Click\( \)-方法，点击列表某行；

  * 说明：
* * 示例：
  * ```js
    ListView.Items[0].Click();//第0行被点击    触发item的点击事件;    //ListView为文本输入框控件对象
    ```
* ##### ListView-属性，通过行对象获取所在列表控件对象；

  * 说明：对象；
* * 示例：
  * ```js
    var listView = item.ListView;    //item为列表控件的某一个行对象;ListView为控件对象
    ```
* ##### RemoveItem\(item\)-方法，移除行对象；

  * 说明：item为列表控件的某一个行对象
* * 示例：
  * ```js
    ListView.RemoveItem(item);//ListView为控件对象
    ```
* ##### ShowChildPanel\( \)-方法，分组项显示子项；

  * 说明：
* * 示例：
  * ```js
    GroupItem.ShowChildPanel();//    GroupItem代表分组项对象;   ListView为控件对象
    ```
* ##### HideChildPanel\( \)-方法，分组项隐藏子项；

  * 说明：
* * 示例：
  * ```js
    GroupItem.HideChildPanel();//    GroupItem代表分组项对象;   ListView为控件对象
    ```
* ##### ChangeTemplate\(item,template\)-方法，切换模板显示；

  * 说明：
* * 示例：
  * ```js
    ListView.ChangeTemplate(item,template)//item:对象，行对象；template：字符串，创建的模板名称//ListView为控件对象
    ```

##### 



